# ุชุญุณููุงุช ูุธุงู ุงูุฏูุน ูุงูุชุณุนูุฑ - Speedy Van

## ููุฎุต ุงูุชุญุณููุงุช

ุชู ุชุทุจูู ูุฌููุนุฉ ูู ุงูุชุญุณููุงุช ุงููููุฉ ุนูู ูุธุงู ุงูุญุฌุฒ ูุงูุชุณุนูุฑ ูุงูุฏูุน ูู Speedy Van ูุญู ุงููุดุงูู ุงููุญุฏุฏุฉ ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู.

## ๐ง ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. ูุดููุฉ Stripe - ุงูุณุนุฑ ุงูุซุงุจุช

**ุงููุดููุฉ:** ูุงู Stripe ูุณุชุฎุฏู ูููุฉ ุซุงุจุชุฉ ุจุฏูุงู ูู ุงูุณุนุฑ ุงููุญุณูุจ ุฏููุงููููุงู.

**ุงูุญู:**
- ุชู ุชุญุฏูุซ `apps/web/src/app/api/bookings/route.ts` ูุชุนููู `lockedAmountPence` ุนูุฏ ุฅูุดุงุก ุงูุญุฌุฒ
- ุชู ุฅุถุงูุฉ `lockExpiresAt` ูุชุซุจูุช ุงูุณุนุฑ ููุฏุฉ 15 ุฏูููุฉ
- ุชู ุงูุชุฃูุฏ ูู ุงุณุชุฎุฏุงู `lockedAmountPence` ูู `checkout/session/route.ts`

```typescript
// ูุจู ุงูุชุญุณูู
const booking = await prisma.booking.create({
  data: {
    amountPence: data.amountPence,
    paymentStatus: "unpaid",
  }
});

// ุจุนุฏ ุงูุชุญุณูู
const lockExpiresAt = new Date(Date.now() + (15 * 60 * 1000));
const booking = await prisma.booking.create({
  data: {
    amountPence: data.amountPence,
    lockedAmountPence: data.amountPence, // ุงูุณุนุฑ ุงููุซุจุช
    lockExpiresAt, // ุชุงุฑูุฎ ุงูุชูุงุก ุงูุชุซุจูุช
    paymentStatus: "unpaid",
  }
});
```

### 2. ูุดููุฉ ุงููุณุงูุฉ - ุชุญููู ูู ูููููุชุฑ ุฅูู ููู

**ุงููุดููุฉ:** ูุงู ุงููุธุงู ูุญุณุจ ุงููุณุงูุฉ ุจุงููููููุชุฑ ุจูููุง ุงูุชุณุนูุฑ ูุนุชูุฏ ุนูู ุงูููู.

**ุงูุญู:**
- ุชู ุชุญุฏูุซ `apps/web/src/lib/pricing.ts` ูุชุญููู ุงููุณุงูุฉ ูู ูุชุฑ ุฅูู ููู
- ุชู ุชุบููุฑ `computePerKmPence` ุฅูู `computePerMilePence`
- ุชู ุชุญุฏูุซ ุฌููุน ุงููุฑุงุฌุน ูู ูููุงุช API

```typescript
// ูุจู ุงูุชุญุณูู
const distanceKm = (input.distanceMeters ?? 0) / 1000;
const distancePence = computePerKmPence(distanceKm, perKmBands);

// ุจุนุฏ ุงูุชุญุณูู
const distanceMiles = (input.distanceMeters ?? 0) / 1609.34; // 1 mile = 1609.34 meters
const distancePence = computePerMilePence(distanceMiles, perMileBands);
```

### 3. ุชุญุณููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู

**ุงููุดููุฉ:** ุตูุญุงุช ุงูุฏูุน ูุงูุช ุจุณูุทุฉ ุฌุฏุงู ูุจุฏูู ุชูุงุตูู ูุงููุฉ.

**ุงูุญู:**
- ุชู ุฅุนุงุฏุฉ ุชุตููู ุตูุญุฉ checkout ูุชุชุถูู ุชูุงุตูู ุงูุญุฌุฒ ูุงูุณุนุฑ
- ุชู ุชุญุณูู ุตูุญุฉ ูุฌุงุญ ุงูุฏูุน ูุน ุฑุณุงุฆู ูุงุถุญุฉ ูุฃุฒุฑุงุฑ ุชูุงุนููุฉ
- ุชู ุฅุถุงูุฉ ุชุตููู responsive ูุน ุฃููุงู ูุงุถุญุฉ

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### ูููุงุช API
- `apps/web/src/app/api/bookings/route.ts` - ุฅุถุงูุฉ ุชุซุจูุช ุงูุณุนุฑ
- `apps/web/src/app/api/bookings/[id]/route.ts` - ุชุญุฏูุซ ุญุณุงุจ ุงูุณุนุฑ
- `apps/web/src/app/api/pricing/quote/route.ts` - ุชุญููู ุงููุณุงูุฉ
- `apps/web/src/app/api/pricing/lock/route.ts` - ุชุญุฏูุซ hash calculation

### ูููุงุช ุงูุชุณุนูุฑ
- `apps/web/src/lib/pricing.ts` - ุชุญููู ูู ูููููุชุฑ ุฅูู ููู
- `apps/web/src/lib/stripe.ts` - ุชุญุณููุงุช ุนูู Stripe config

### ูููุงุช ุงููุงุฌูุฉ
- `apps/web/src/app/(public)/checkout/page.tsx` - ุฅุนุงุฏุฉ ุชุตููู ูุงููุฉ
- `apps/web/src/app/(public)/checkout/success/page.tsx` - ุชุญุณูู ุตูุญุฉ ุงููุฌุงุญ

## ๐จ ุชุญุณููุงุช ุงููุงุฌูุฉ

### ุตูุญุฉ Checkout ุงูุฌุฏูุฏุฉ
- **ุนุฑุถ ุชูุงุตูู ุงูุญุฌุฒ:** ุนููุงูู ุงูุงูุชูุงุท ูุงูุชูุตููุ ุงููุณุงูุฉุ ููุน ุงูุดุงุญูุฉ
- **ููุฎุต ุงูุณุนุฑ:** ุชูุตูู ูุงุถุญ ููุฑุณูู ูุน VAT
- **ุชุซุจูุช ุงูุณุนุฑ:** ุนุฑุถ ููุช ุงูุชูุงุก ุชุซุจูุช ุงูุณุนุฑ
- **ุชุตููู responsive:** ูุนูู ุจุดูู ูุซุงูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ

### ุตูุญุฉ ุงููุฌุงุญ ุงููุญุณูุฉ
- **ุฑุณุงุฆู ูุงุถุญุฉ:** ุชุฃููุฏ ูุฌุงุญ ุงูุฏูุน
- **ุฃุฒุฑุงุฑ ุชูุงุนููุฉ:** ุชุชุจุน ุงูุญุฌุฒ ูุชุญููู ุงูุฅูุตุงู
- **ุงูุฎุทูุงุช ุงูุชุงููุฉ:** ุฅุฑุดุงุฏุงุช ูุงุถุญุฉ ููุนููู
- **ูุนูููุงุช ุงูุงุชุตุงู:** ุณูููุฉ ุงููุตูู ููุฏุนู

## ๐ ุชุฏูู ุงูุนูู ุงููุญุณู

### 1. ุฅูุดุงุก ุงูุญุฌุฒ
```
POST /api/bookings
โ
ุชุนููู lockedAmountPence ู lockExpiresAt
โ
ุฅุฑุฌุงุน ุชูุงุตูู ุงูุญุฌุฒ ูุน ุงูุณุนุฑ ุงููุซุจุช
```

### 2. ุนุฑุถ ุตูุญุฉ ุงูุฏูุน
```
GET /checkout?booking=BOOKING_ID
โ
ุฌูุจ ุชูุงุตูู ุงูุญุฌุฒ ูู /api/bookings/[id]
โ
ุนุฑุถ ุชูุงุตูู ุงูุญุฌุฒ ูุงูุณุนุฑ ุงููุซุจุช
```

### 3. ุฅูุดุงุก ุฌูุณุฉ ุงูุฏูุน
```
POST /api/checkout/session
โ
ุงุณุชุฎุฏุงู lockedAmountPence ูู Stripe
โ
ุฅูุดุงุก ุฌูุณุฉ ุฏูุน ุฏููุงููููุฉ
```

### 4. ูุนุงูุฌุฉ ุงูุฏูุน
```
Stripe Webhook โ /api/webhooks/stripe
โ
ุชุญุฏูุซ ุญุงูุฉ ุงูุญุฌุฒ ุฅูู "paid"
โ
ุฅุฑุณุงู ุฅูุตุงู ููุนููู
```

## ๐ ุงูุชุญุณููุงุช ุงูุชูููุฉ

### ุฃุฏุงุก ูุญุณู
- **ุชุฎุฒูู ูุคูุช:** ุชุซุจูุช ุงูุณุนุฑ ููุฏุฉ 15 ุฏูููุฉ
- **ุญุณุงุจ ุฏููู:** ุงุณุชุฎุฏุงู ุงูููู ุจุฏูุงู ูู ุงููููููุชุฑ
- **ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ:** ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฃูุงู ูุญุณู
- **ุชุญูู ูู ุงูุณุนุฑ:** ุงูุชุฃูุฏ ูู ุชุทุงุจู ุงูุณุนุฑ ุงููุฏููุน ูุน ุงููุซุจุช
- **ุชูููุช ูุญุฏุฏ:** ุงูุชูุงุก ุตูุงุญูุฉ ุงูุณุนุฑ ุงููุซุจุช
- **ุชุญูู ูู ุงูุฌูุณุฉ:** ุงูุชุฃูุฏ ูู ุตุญุฉ ุฌูุณุฉ Stripe

### ูุงุจููุฉ ุงูุตูุงูุฉ
- **ููุฏ ููุธู:** ูุตู ูุงุถุญ ุจูู ููุทู ุงูุชุณุนูุฑ ูุงูุฏูุน
- **ุชูุซูู ุดุงูู:** ุชุนูููุงุช ูุงุถุญุฉ ุนูู ุฌููุน ุงูุชุบููุฑุงุช
- **ุงุฎุชุจุงุฑ ุดุงูู:** ุชุบุทูุฉ ุฌููุน ุงูุณููุงุฑูููุงุช

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุชุญุณููุงุช ููุชุฑุญุฉ
1. **ุฅุถุงูุฉ ุฎุตููุงุช:** ูุธุงู ููุจููุงุช ูุฎุตููุงุช
2. **ุชุณุนูุฑ ุฏููุงูููู:** ุชุนุฏูู ุงูุฃุณุนุงุฑ ุญุณุจ ุงูุทูุจ
3. **ูุฏููุนุงุช ูุชุนุฏุฏุฉ:** ุฏุนู PayPal ูุทุฑู ุฏูุน ุฃุฎุฑู
4. **ุฅุดุนุงุฑุงุช ููุฑูุฉ:** SMS ูpush notifications
5. **ุชุญูููุงุช ูุชูุฏูุฉ:** ุชูุงุฑูุฑ ููุตูุฉ ุนู ุงููุจูุนุงุช

### ุงุฎุชุจุงุฑุงุช ูุทููุจุฉ
- [ ] ุงุฎุชุจุงุฑ ุชุฏูู ุงูุฏูุน ุงููุงูู
- [ ] ุงุฎุชุจุงุฑ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุณุนุฑ ุงููุซุจุช
- [ ] ุงุฎุชุจุงุฑ ุงูุฃุฎุทุงุก ูุงูุงุณุชุซูุงุกุงุช
- [ ] ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก ุชุญุช ุงูุญูู
- [ ] ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุงููุชุตูุญุงุช

## ๐ ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงูู:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** support@speedyvan.com
- **ุงููุงุชู:** 0800 123 4567
- **ุงูุชูุซูู:** ุฑุงุฌุน ูููุงุช README ูู ูู ูุฌูุฏ

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** ููุงูุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0.0  
**ุงููุทูุฑ:** Speedy Van Team
